(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6664:function(e,o,t){Promise.resolve().then(t.bind(t,2406)),Promise.resolve().then(t.t.bind(t,6708,23)),Promise.resolve().then(t.t.bind(t,2445,23))},2406:function(e,o,t){"use strict";t.r(o),t.d(o,{AuthProvider:function(){return a},useAuth:function(){return i}});var n=t(3827),l=t(4090),r=t(9263);let s=(0,l.createContext)(void 0);function a(e){let{children:o}=e,[t,a]=(0,l.useState)(null),[i,u]=(0,l.useState)(!0),d=()=>{try{if("undefined"==typeof localStorage){console.log("⚠️ localStorage not available"),a(null),u(!1);return}let e=localStorage.getItem("cardscope_user");if(e){let o=JSON.parse(e);a(o),console.log("✅ User found in localStorage:",o.email)}else a(null),console.log("❌ No user found in localStorage")}catch(e){console.error("Error checking auth:",e),a(null)}finally{u(!1)}};(0,l.useEffect)(()=>{if(d(),r.dV.isNativePlatform()){console.log("\uD83D\uDCF1 Setting up deep link listeners...");let e=e=>{var o,t;console.log("\uD83D\uDCF1 Received appUrlOpen event:",null===(o=e.detail)||void 0===o?void 0:o.url),(null===(t=e.detail)||void 0===t?void 0:t.url)&&e.detail.url.includes("cardscope://")&&c(e.detail.url)};window.addEventListener("appUrlOpen",e);let o=e=>{console.log("\uD83D\uDCF1 Received deepLink event from native:",e.detail),c(e.detail)};window.addEventListener("deepLink",o);let t=()=>{let e=window.location.href;e&&e.includes("cardscope://")&&(console.log("\uD83D\uDCF1 Found cardscope:// in window.location:",e),c(e))};t();let n=setInterval(t,1e3);return()=>{window.removeEventListener("appUrlOpen",e),window.removeEventListener("deepLink",o),clearInterval(n)}}let e=e=>{if("cardscope_user"===e.key){if(e.newValue){let o=JSON.parse(e.newValue);a(o),console.log("✅ User updated from storage:",o.email)}else a(null),console.log("❌ User removed from storage")}};window.addEventListener("storage",e);let o=()=>{d()};return window.addEventListener("authUpdated",o),()=>{window.removeEventListener("storage",e),window.removeEventListener("authUpdated",o)}},[]);let c=e=>{try{console.log("\uD83D\uDD17 Processing deep link URL:",e);let o=new URL(e),t=o.searchParams.get("status"),n=o.searchParams.get("userData");if(console.log("\uD83D\uDCF1 Deep link status:",t),console.log("\uD83D\uDCF1 Deep link userData:",n),"success"===t&&n){let e=JSON.parse(decodeURIComponent(n));console.log("\uD83D\uDCF1 Parsed user data from deep link:",e),localStorage.setItem("cardscope_user",JSON.stringify(e)),a(e),window.dispatchEvent(new Event("authUpdated")),console.log("✅ User data stored from deep link")}}catch(e){console.error("Error processing deep link:",e)}};return(0,n.jsx)(s.Provider,{value:{user:t,isLoading:i,signOut:()=>{localStorage.removeItem("cardscope_user"),a(null),console.log("✅ User signed out")}},children:o})}function i(){let e=(0,l.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2445:function(){},6708:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}}},function(e){e.O(0,[263,971,69,744],function(){return e(e.s=6664)}),_N_E=e.O()}]);