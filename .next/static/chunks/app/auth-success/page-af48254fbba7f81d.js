(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{4789:function(e,s,a){Promise.resolve().then(a.bind(a,564))},564:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(3827),r=a(4090),n=a(7907);function o(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)();return(0,r.useEffect)(()=>{let a=s.get("status"),t=s.get("userData");console.log("\uD83D\uDCF1 Auth success page loaded"),console.log("\uD83D\uDCF1 Status from searchParams:",a),console.log("\uD83D\uDCF1 User data param from searchParams:",t),console.log("\uD83D\uDCF1 Current URL:",window.location.href);let r=new URLSearchParams(window.location.search),n=r.get("status"),o=r.get("userData");console.log("\uD83D\uDCF1 Direct URL params - Status:",n),console.log("\uD83D\uDCF1 Direct URL params - UserData:",o);let u=a||n,c=t||o;if(console.log("\uD83D\uDCF1 Final Status:",u),console.log("\uD83D\uDCF1 Final User Data:",c),"success"===u&&c)try{let s=JSON.parse(decodeURIComponent(c));console.log("\uD83D\uDCF1 Parsed user data:",s),localStorage.setItem("cardscope_user",JSON.stringify(s)),window.dispatchEvent(new Event("authUpdated")),console.log("✅ User data stored in localStorage"),setTimeout(()=>{e.replace("/")},1e3)}catch(s){console.error("❌ Failed to parse user data:",s),e.replace("/")}else"success"===u?localStorage.getItem("cardscope_user")?(console.log("✅ User already authenticated"),e.replace("/")):(console.log("⚠️ Success but no user data found"),e.replace("/login")):(console.log("❌ Auth failed or unknown status:",u),e.replace("/login"))},[s,e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Completing authentication..."})]})})}function u(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:(0,t.jsx)(o,{})})}},7907:function(e,s,a){"use strict";var t=a(5313);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=4789)}),_N_E=e.O()}]);