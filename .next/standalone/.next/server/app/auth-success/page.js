(()=>{var e={};e.id=743,e.ids=[743],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},98769:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c});var s=r(50482),a=r(69108),o=r(62563),n=r.n(o),l=r(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let c=["",{children:["auth-success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,93776)),"/Users/murari/WebstormProjects/cardscope-web/app/auth-success/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,98982)),"/Users/murari/WebstormProjects/cardscope-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/murari/WebstormProjects/cardscope-web/app/auth-success/page.tsx"],d="/auth-success/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth-success/page",pathname:"/auth-success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},86522:(e,t,r)=>{Promise.resolve().then(r.bind(r,55297))},93148:(e,t,r)=>{Promise.resolve().then(r.bind(r,67296))},80575:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},55297:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(95344),a=r(3729),o=r(8428);function n(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)();return(0,a.useEffect)(()=>{let r=t.get("status"),s=t.get("userData");console.log("\uD83D\uDCF1 Auth success page loaded"),console.log("\uD83D\uDCF1 Status from searchParams:",r),console.log("\uD83D\uDCF1 User data param from searchParams:",s),console.log("\uD83D\uDCF1 Current URL:",window.location.href);let a=new URLSearchParams(window.location.search),o=a.get("status"),n=a.get("userData");console.log("\uD83D\uDCF1 Direct URL params - Status:",o),console.log("\uD83D\uDCF1 Direct URL params - UserData:",n);let l=r||o,i=s||n;if(console.log("\uD83D\uDCF1 Final Status:",l),console.log("\uD83D\uDCF1 Final User Data:",i),"success"===l&&i)try{let t=JSON.parse(decodeURIComponent(i));console.log("\uD83D\uDCF1 Parsed user data:",t),localStorage.setItem("cardscope_user",JSON.stringify(t)),window.dispatchEvent(new Event("authUpdated")),console.log("✅ User data stored in localStorage"),setTimeout(()=>{e.replace("/")},1e3)}catch(t){console.error("❌ Failed to parse user data:",t),e.replace("/")}else"success"===l?localStorage.getItem("cardscope_user")?(console.log("✅ User already authenticated"),e.replace("/")):(console.log("⚠️ Success but no user data found"),e.replace("/login")):(console.log("❌ Auth failed or unknown status:",l),e.replace("/login"))},[t,e]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Completing authentication..."})]})})}function l(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:s.jsx(n,{})})}},67296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>l,useAuth:()=>i});var s=r(95344),a=r(3729),o=r(77215);let n=(0,a.createContext)(void 0);function l({children:e}){let[t,r]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0),c=()=>{try{if("undefined"==typeof localStorage){console.log("⚠️ localStorage not available"),r(null),i(!1);return}let e=localStorage.getItem("cardscope_user");if(e){let t=JSON.parse(e);r(t),console.log("✅ User found in localStorage:",t.email)}else r(null),console.log("❌ No user found in localStorage")}catch(e){console.error("Error checking auth:",e),r(null)}finally{i(!1)}};(0,a.useEffect)(()=>{if(c(),o.dV.isNativePlatform()){console.log("\uD83D\uDCF1 Setting up deep link listeners...");let e=e=>{console.log("\uD83D\uDCF1 Received appUrlOpen event:",e.detail?.url),e.detail?.url&&e.detail.url.includes("cardscope://")&&u(e.detail.url)};window.addEventListener("appUrlOpen",e);let t=e=>{console.log("\uD83D\uDCF1 Received deepLink event from native:",e.detail),u(e.detail)};window.addEventListener("deepLink",t);let r=()=>{let e=window.location.href;e&&e.includes("cardscope://")&&(console.log("\uD83D\uDCF1 Found cardscope:// in window.location:",e),u(e))};r();let s=setInterval(r,1e3);return()=>{window.removeEventListener("appUrlOpen",e),window.removeEventListener("deepLink",t),clearInterval(s)}}let e=e=>{if("cardscope_user"===e.key){if(e.newValue){let t=JSON.parse(e.newValue);r(t),console.log("✅ User updated from storage:",t.email)}else r(null),console.log("❌ User removed from storage")}};window.addEventListener("storage",e);let t=()=>{c()};return window.addEventListener("authUpdated",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("authUpdated",t)}},[]);let u=e=>{try{console.log("\uD83D\uDD17 Processing deep link URL:",e);let t=new URL(e),s=t.searchParams.get("status"),a=t.searchParams.get("userData");if(console.log("\uD83D\uDCF1 Deep link status:",s),console.log("\uD83D\uDCF1 Deep link userData:",a),"success"===s&&a){let e=JSON.parse(decodeURIComponent(a));console.log("\uD83D\uDCF1 Parsed user data from deep link:",e),localStorage.setItem("cardscope_user",JSON.stringify(e)),r(e),window.dispatchEvent(new Event("authUpdated")),console.log("✅ User data stored from deep link")}}catch(e){console.error("Error processing deep link:",e)}};return s.jsx(n.Provider,{value:{user:t,isLoading:l,signOut:()=>{localStorage.removeItem("cardscope_user"),r(null),console.log("✅ User signed out")}},children:e})}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},93776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let s=(0,r(86843).createProxy)(String.raw`/Users/murari/WebstormProjects/cardscope-web/app/auth-success/page.tsx`),{__esModule:a,$$typeof:o}=s,n=s.default},98982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>d,viewport:()=>p});var s=r(25036),a=r(20569),o=r.n(a);r(67272);var n=r(86843);let l=(0,n.createProxy)(String.raw`/Users/murari/WebstormProjects/cardscope-web/contexts/AuthContext.tsx`),{__esModule:i,$$typeof:c}=l;l.default;let u=(0,n.createProxy)(String.raw`/Users/murari/WebstormProjects/cardscope-web/contexts/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/murari/WebstormProjects/cardscope-web/contexts/AuthContext.tsx#useAuth`);let d={title:"CardScope",description:"CardScope — your personalized credit card rewards advisor"},p={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover"};function m({children:e}){return s.jsx("html",{lang:"en",className:o().variable,children:s.jsx("body",{className:"font-sans bg-gray-50 text-gray-900 antialiased",children:s.jsx(u,{children:e})})})}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,650,404],()=>r(98769));module.exports=s})();